<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:berber_randevu_uygulamasi.Models"
             x:Class="berber_randevu_uygulamasi.Views.RandevuAlSayfasi"
             BackgroundColor="#F6EEDD">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- ÜST KISIM: Arama + Başlık -->
        <VerticalStackLayout Grid.Row="0"
                             Padding="20,20,20,10"
                             Spacing="20">

            <!-- Arama Kutusu -->
            <Border BackgroundColor="#E8D8BE"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 24"
                    Padding="14,10"
                    HorizontalOptions="Fill">

                <Grid ColumnDefinitions="Auto,*"
                      VerticalOptions="Center">

                    <!-- Arama ikonu -->
                    <Image Source="search_icon.png"
                           HeightRequest="22"
                           WidthRequest="22"
                           VerticalOptions="Center"
                           Margin="0,0,10,0" />

                    <!-- Arama Entry -->
                    <Entry x:Name="BerberAraEntry"
                           Grid.Column="1"
                           Placeholder="Berber ara"
                           FontSize="18"
                           BackgroundColor="Transparent"
                           TextColor="Black"
                           TextChanged="BerberAraEntry_TextChanged"/>
                </Grid>
            </Border>

            <!-- Başlık -->
            <Label Text="Berber seçin"
                   FontSize="32"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="Black"
                   Margin="0,10,0,0" />

        </VerticalStackLayout>


        <!-- ORTA KISIM: Berber Listesi -->
        <CollectionView x:Name="BerberCollection"
                        SelectionChanged="BerberCollection_SelectionChanged"
                        Grid.Row="1"
                        Margin="20,10"
                        SelectionMode="Single">

            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="20" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Berber">
                    <Border BackgroundColor="#E8D8BE"
                            StrokeThickness="0"
                            StrokeShape="RoundRectangle 28"
                            Padding="16"
                            Margin="0,8">

                        <HorizontalStackLayout Spacing="16"
                               VerticalOptions="Center">

                            <!-- Profil fotoğrafı -->
                            <Border HeightRequest="70"
                                    WidthRequest="70"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 100">

                                <Image Source="{Binding ResimYolu}"
                       Aspect="AspectFill" />
                            </Border>

                            <!-- Berber Adı -->
                            <Label Text="{Binding BerberAdi}"
                   FontSize="24"
                   FontAttributes="Bold"
                   VerticalOptions="Center"
                   TextColor="Black" />
                        </HorizontalStackLayout>

                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>


        <!-- ALT BAR -->
        <Grid Grid.Row="2"
              BackgroundColor="#3A2A1A"
              HeightRequest="65"
              ColumnDefinitions="*,*,*">

            <!-- Ana Sayfa -->
            <ImageButton Grid.Column="0"
                         Source="home.png"
                         BackgroundColor="Transparent"
                         HeightRequest="32"
                         WidthRequest="32"
                         HorizontalOptions="Center"
                         VerticalOptions="Center"
                         Clicked="AnaSayfaClicked" />

            <!-- Randevu Al -->
            <ImageButton Grid.Column="1"
                         Source="scissors.png"
                         BackgroundColor="Transparent"
                         HeightRequest="32"
                         WidthRequest="32"
                         HorizontalOptions="Center"
                         VerticalOptions="Center"
                         Clicked="RandevuAlClicked" />

            <!-- Profil -->
            <ImageButton Grid.Column="2"
                         Source="user.png"
                         BackgroundColor="Transparent"
                         HeightRequest="32"
                         WidthRequest="32"
                         HorizontalOptions="Center"
                         VerticalOptions="Center"
                         Clicked="ProfilClicked" />

        </Grid>

    </Grid>
</ContentPage>
