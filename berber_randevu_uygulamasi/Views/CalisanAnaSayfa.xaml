<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:altbar="clr-namespace:berber_randevu_uygulamasi.Views.AltBarlar"
             xmlns:models="clr-namespace:berber_randevu_uygulamasi.Models"
             x:Class="berber_randevu_uygulamasi.Views.CalisanAnaSayfa"
             Title="Çalışan"
             xmlns:views="clr-namespace:berber_randevu_uygulamasi.Views"
             x:DataType="views:CalisanAnaSayfa"
             BackgroundColor="#0F0F0F">

    <Grid RowDefinitions="Auto,Auto,* ,Auto" RowSpacing="12" Padding="12">

        <!-- Üst şerit -->
        <Grid RowDefinitions="Auto" ColumnDefinitions="Auto,*,Auto" Padding="0,6">
            <!-- Foto -->
            <Border WidthRequest="44" HeightRequest="44"
                    Stroke="#2B2B2B"
                    BackgroundColor="#1A1A1A"
                    StrokeShape="RoundRectangle 14"
                    Padding="0">
                <Image Source="{Binding Foto}"
                       Aspect="AspectFill" />
            </Border>

            <!-- Ad + uzmanlık -->
            <VerticalStackLayout Grid.Column="1" Spacing="2" Margin="10,0,0,0" VerticalOptions="Center">
                <Label Text="{Binding AdSoyad}"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="#F2F2F2" />
                <Label Text="{Binding Uzmanlik}"
                       FontSize="12"
                       TextColor="#BDBDBD" />
            </VerticalStackLayout>

            <!-- Durum badge -->
            <Border Grid.Column="2"
                    BackgroundColor="#1A1A1A"
                    Stroke="#2B2B2B"
                    StrokeShape="RoundRectangle 14"
                    Padding="10,6"
                    VerticalOptions="Center">
                <Label Text="{Binding DurumText}"  FontSize="12" TextColor="#F2F2F2"/>
            </Border>
        </Grid>

        <!-- Özet Kartlar -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*,*" ColumnSpacing="10">
            <Border BackgroundColor="#1A1A1A" Stroke="#2B2B2B" StrokeShape="RoundRectangle 18" Padding="12">
                <VerticalStackLayout Spacing="2">
                    <Label Text="Bugün" FontSize="12" TextColor="#BDBDBD"/>
                    <Label Text="{Binding BugunRandevuSayisi}" FontSize="18" FontAttributes="Bold" TextColor="#F2F2F2"/>
                </VerticalStackLayout>
            </Border>

            <Border Grid.Column="1" BackgroundColor="#1A1A1A" Stroke="#2B2B2B" StrokeShape="RoundRectangle 18" Padding="12">
                <VerticalStackLayout Spacing="2">
                    <Label Text="Kazanç" FontSize="12" TextColor="#BDBDBD"/>
                    <Label Text="{Binding BugunKazanc, StringFormat='{0:0} ₺'}" FontSize="18" FontAttributes="Bold" TextColor="#F2F2F2"/>
                </VerticalStackLayout>
            </Border>

            <Border Grid.Column="2" BackgroundColor="#1A1A1A" Stroke="#2B2B2B" StrokeShape="RoundRectangle 18" Padding="12">
                <VerticalStackLayout Spacing="2">
                    <Label Text="Süre" FontSize="12" TextColor="#BDBDBD"/>
                    <Label Text="{Binding BugunToplamSureDakika, StringFormat='{0} dk'}" FontSize="18" FontAttributes="Bold" TextColor="#F2F2F2"/>
                </VerticalStackLayout>
            </Border>
        </Grid>

        <!-- Liste alanı -->
        <ScrollView Grid.Row="2">
            <VerticalStackLayout Spacing="12">

                <!-- Sıradaki randevu -->
                <Grid ColumnDefinitions="*,Auto">
                    <Label Text="Sıradaki Randevu" FontSize="16" FontAttributes="Bold" TextColor="#F2F2F2"/>
                    <Button Grid.Column="1" Text="Tümü"
                            BackgroundColor="Transparent"
                            TextColor="#F2F2F2"
                            Clicked="TumRandevular_Clicked"/>
                </Grid>

                <Border BackgroundColor="#1A1A1A"
                        Stroke="#2B2B2B"
                        StrokeShape="RoundRectangle 18"
                        Padding="14">
                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="12">
                        <Label Text="{Binding SiradakiRandevu.SaatText}" FontSize="20" FontAttributes="Bold" TextColor="#F2F2F2"/>
                        <Label Grid.Column="1"
                               Text="{Binding SiradakiRandevu.MusteriAdSoyad}"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#F2F2F2"/>
                        <Label Grid.Row="1" Grid.Column="1"
                               Text="{Binding SiradakiRandevu.HizmetAdi}"
                               FontSize="12"
                               TextColor="#BDBDBD"/>
                        <Label Grid.Row="2" Grid.Column="1"
                               Text="{Binding SiradakiRandevu.ToplamUcret, StringFormat='{0:0} ₺'}"
                               FontSize="12"
                               TextColor="#BDBDBD"/>
                    </Grid>
                </Border>

                <!-- Bugünkü randevular -->
                <Label Text="Bugünkü Liste" FontSize="16" FontAttributes="Bold" TextColor="#F2F2F2"/>

                <CollectionView ItemsSource="{Binding BugunRandevular}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:RandevuKart">
                            <Border BackgroundColor="#1A1A1A"
                                    Stroke="#2B2B2B"
                                    StrokeShape="RoundRectangle 18"
                                    Padding="14"
                                    Margin="0,0,0,10">

                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                                    <!-- Saat -->
                                    <Label Text="{Binding SaatText}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#F2F2F2"
                                           VerticalOptions="Center"/>

                                    <Grid Grid.Column="1" RowDefinitions="Auto,Auto" ColumnDefinitions="*,Auto">
                                        <Label Text="{Binding MusteriAdSoyad}"
                                               FontAttributes="Bold"
                                               FontSize="14"
                                               TextColor="#F2F2F2"/>

                                        <Label Grid.Column="1"
                                               Text="{Binding ToplamUcret, StringFormat='{0:0} ₺'}"
                                               FontAttributes="Bold"
                                               FontSize="14"
                                               TextColor="#F2F2F2"
                                               HorizontalTextAlignment="End"/>

                                        <Label Grid.Row="1"
                                               Text="{Binding HizmetAdi}"
                                               FontSize="12"
                                               TextColor="#BDBDBD"/>

                                        <Label Grid.Row="1" Grid.Column="1"
                                               Text="{Binding DurumText}"
                                               FontSize="12"
                                               TextColor="#BDBDBD"
                                               HorizontalTextAlignment="End"/>
                                    </Grid>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Alt bar -->
        <altbar:CalisanAltBar Grid.Row="3"/>
    </Grid>
</ContentPage>